<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Cute Cat!!!</title>
</head>

<body>
<h2>What a Cute Cat!!!</h2>

<img src="cat.jpg"/>


<script>
    const xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState === XMLHttpRequest.DONE) {
            if (xmlhttp.status === 200) {
                /*
                    Here, I could send this info via AJAX to a malicious
                    server. But it will fail.
                    The browser does the GET, but, when it gets the response, as
                    Access-Control-Allow-Origin does not match (or not even present),
                    all data is removed from the response, including the status code!
                */
                alert("Data: " + xmlhttp.response);
            } else {
                alert("Damn... tried to steal your info but failed. Status code: " + xmlhttp.status);
            }
        }
    };

    xmlhttp.open("GET", "http://localhost:8080/api/user");
    xmlhttp.withCredentials = true;
    xmlhttp.send();
</script>
</body>

</html>

